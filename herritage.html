<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning APIs and JSON</title>
    <link rel="stylesheet" href="api.css">
</head>
<body>
    <nav>
        <div class = "left-side">
            <h2>Spencer Kifell</h2>
        </div>
        <div class = "right-side">
            <a href = "./index.html" class="standard">Home</a>
            <a href = "./index.html#about" class="query">About</a>
            <a href = "./herritage.html" class="selected">Features</a>
            <a href = "https://github.com/Spencerkifell" target="_blank" class="query">GitHub</a>
            <a href = "https://www.linkedin.com/in/spencerkifell/" target="_blank" class="query">Linkedin</a>
            <a href = "./contact.html" class="standard">Contact</a>
            <a href = "./influences.html" class="standard">Influences</a>
        </div>
    </nav>

    <div id="nameApi">
        <h1 id="title">NAME ORIGIN API</h1>
        <input type="text" id="fname" placeholder="First Name">
        <button id="myBtnApi">CLICK</button>
        <div id="output">
            <p>Content</p>
            <pre id = "content"></pre>
        </div>
    </div>
    <script>
        var button = document.getElementById("myBtnApi");
        var content = document.getElementById("output");

        button.addEventListener("click", function(){
            var name = document.getElementById("fname").value;
            var url = (`https://api.nationalize.io?` + `name=${name}`);
            console.log(url);
            fetch(url)
            .then(function(response){
                return response.json(); //JSON.parse(jsonResponse)
            })
            .then(function(responseJson){
                let text = document.getElementById('content');
                text.innerHTML = "";
                let obj = responseJson.country;
                for(let i = 0; i < 2; i++){
                    text.textContent += "\n";
                    text.textContent += `Country: ${obj[i].country_id}`;
                    text.textContent += "\n";
                    text.textContent += `Probability: ${obj[i].probability}`;
                    text.textContent += "\n";
                }
                content.style.display = "flex";
            })
            .catch(function(error){
                console.log('Error: ', error);
            });
        });
    </script>
</body>
</html>